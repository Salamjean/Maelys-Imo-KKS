{
    "info": {
        "_postman_id": "c765c8bf-2117-4ef0-9fb5-6f070abc2a46",
        "name": "Maelys Imo KKS API",
        "description": "Collection des endpoints API pour les locataires et agents (Authentification via code_id)",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Login (Locataire/Agent)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"code_id\": \"LOC12345\",\n    \"password\": \"password\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "login"
                            ]
                        },
                        "description": "Authentifie un utilisateur (locataire ou comptable/agent) via code_id et password."
                    },
                    "response": []
                },
                {
                    "name": "Forgot Password",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"code_id\": \"LOC12345\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/password/forgot",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "password",
                                "forgot"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Reset Password",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"code_id\": \"LOC12345\",\n    \"otp\": \"123456\",\n    \"password\": \"newpassword\",\n    \"password_confirmation\": \"newpassword\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/password/reset",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "password",
                                "reset"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Locataire",
            "item": [
                {
                    "name": "Dashboard",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/tenant/dashboard",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "tenant",
                                "dashboard"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Profile",
                    "item": [
                        {
                            "name": "Get Profile Info",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/tenant/profil/edit",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "profil",
                                        "edit"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update Profile Photo",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "profile_image",
                                            "type": "file",
                                            "src": []
                                        }
                                    ]
                                },
                                "url": {
                                    "raw": "{{base_url}}/tenant/profile/photo",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "profile",
                                        "photo"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update Password",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"current_password\": \"oldpass\",\n    \"new_password\": \"newpass\",\n    \"new_password_confirmation\": \"newpass\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/tenant/profile/update-password",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "profile",
                                        "update-password"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update Email",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"new_email\": \"new@example.com\",\n    \"password\": \"currentpassword\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/tenant/profile/update-email",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "profile",
                                        "update-email"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Contrat",
                    "item": [
                        {
                            "name": "Get Contrat Link",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/tenant/contrat",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "contrat"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Download Contrat",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/tenant/{{locataireId}}/contrat",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "{{locataireId}}",
                                        "contrat"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Paiements",
                    "item": [
                        {
                            "name": "Make Payment (Mobile Money/Virement)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "methode_paiement",
                                            "value": "mobile_money",
                                            "type": "text",
                                            "description": "mobile_money or virement"
                                        },
                                        {
                                            "key": "proof_file",
                                            "type": "file",
                                            "src": [],
                                            "description": "Required if methode_paiement is virement"
                                        },
                                        {
                                            "key": "transaction_id",
                                            "value": "",
                                            "type": "text",
                                            "description": "Optional"
                                        }
                                    ]
                                },
                                "url": {
                                    "raw": "{{base_url}}/tenant/{{locataireId}}/paiements",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "{{locataireId}}",
                                        "paiements"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "List Payments",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/tenant/{{locataireId}}/paiements",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "{{locataireId}}",
                                        "paiements"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Show Payment Details",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/tenant/paiements/{{paymentId}}",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "tenant",
                                        "paiements",
                                        "{{paymentId}}"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Contact Agency",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Bonjour, ...\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_url}}/tenant/contact/agency",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "tenant",
                                "contact",
                                "agency"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Agent",
            "item": [
                {
                    "name": "Paiements",
                    "item": [
                        {
                            "name": "Payment History",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/paiements/history?per_page=10",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "paiements",
                                        "history"
                                    ],
                                    "query": [
                                        {
                                            "key": "per_page",
                                            "value": "10"
                                        }
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Locataires En Retard",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/locataires/retard",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "locataires",
                                        "retard"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Locataires A Jour",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/locataires/a-jour",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "locataires",
                                        "a-jour"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Locataires En Attente (Validation)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/locataires/en-attente",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "locataires",
                                        "en-attente"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Details Locataire",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/locataire/{{locataireId}}/details",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "locataire",
                                        "{{locataireId}}",
                                        "details"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Generate Cash Payment Code",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"locataire_id\": 1,\n    \"nombre_mois\": 1\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/agent/paiement/generer-code-especes",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "paiement",
                                        "generer-code-especes"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Etat des Lieux",
                    "item": [
                        {
                            "name": "Warning (Etats lieux en attente)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/etats-lieu/warning",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "etats-lieu",
                                        "warning"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Details Locataire Full (with EDL)",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/etats-lieu/{{locataireId}}/details",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "etats-lieu",
                                        "{{locataireId}}",
                                        "details"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Etats Lieux Terminés",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/etats/end",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "etats",
                                        "end"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "All Etats Lieux Effectués",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/etats-lieu/effectues?per_page=10&page=1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "etats-lieu",
                                        "effectues"
                                    ],
                                    "query": [
                                        {
                                            "key": "per_page",
                                            "value": "10"
                                        },
                                        {
                                            "key": "page",
                                            "value": "1"
                                        }
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Create Etat Lieu",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"locataire_id\": 1,\n    \"bien_id\": 1,\n    \"presence_partie\": \"oui\",\n    \"nombre_cle\": 2,\n    \"parties_communes\": {\n        \"sol\": \"Bon état\",\n        \"murs\": \"RàS\"\n    },\n    \"chambres\": [\n        {\n            \"nom\": \"Salon\",\n            \"sol\": \"Carrelé\"\n        }\n    ]\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/agent/etat-lieux",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "etat-lieux"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Generate Verification Code",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"locataire_id\": 1\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/agent/code-etat-lieux/generate",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "code-etat-lieux",
                                        "generate"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Verify Code",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"locataire_id\": 1,\n    \"verification_code\": \"ABC123\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/agent/code-etat-lieux/verify",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "code-etat-lieux",
                                        "verify"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get QR Code",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{token}}",
                                        "type": "text"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/agent/code-etat-lieux/qr-code?locataire_id=1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "agent",
                                        "code-etat-lieux",
                                        "qr-code"
                                    ],
                                    "query": [
                                        {
                                            "key": "locataire_id",
                                            "value": "1"
                                        }
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000/api"
        },
        {
            "key": "token",
            "value": "YOUR_ACCESS_TOKEN"
        },
        {
            "key": "locataireId",
            "value": "1"
        },
        {
            "key": "paymentId",
            "value": "1"
        }
    ]
}